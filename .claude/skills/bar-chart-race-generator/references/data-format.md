# 数据格式说明

## 目录
- [字段定义](#字段定义)
- [数据示例](#数据示例)
- [格式验证规则](#格式验证规则)
- [常见问题](#常见问题)

## 概览
动态柱状图需要CSV格式的时序数据，每个时间点包含多个条目的排名值。数据必须严格遵循以下格式要求。

## 字段定义

### 必需字段
- `date`：时间点，格式为 YYYY-MM-DD（如 2000-01-01）
- `name`：条目名称（如品牌名、国家名等）
- `category`：分类标签（如行业、洲别等，用于颜色编码）
- `value`：数值（如品牌价值、GDP等，必须为数字）

### 字段说明
- **date**：表示数据的时间点，多个时间点构成时序。建议使用固定间隔（如每年、每月）
- **name**：条目的唯一标识，在不同时间点保持一致
- **category**：用于分组和颜色编码，同一类别的条目使用相同颜色
- **value**：该时间点该条目的数值，用于排序和柱状图高度

## 数据示例

### 最小示例（2个时间点，4个条目）
```csv
date,name,category,value
2000-01-01,Brand A,Technology,1000
2000-01-01,Brand B,Finance,900
2000-01-01,Brand C,Technology,800
2000-01-01,Brand D,Finance,700
2001-01-01,Brand A,Technology,1100
2001-01-01,Brand B,Finance,850
2001-01-01,Brand C,Technology,950
2001-01-01,Brand D,Finance,800
```

### 完整示例
参见 [assets/sample-data.csv](../assets/sample-data.csv)

## 格式验证规则

### 编码格式
- 文件必须使用UTF-8编码
- 不支持BOM头

### 列顺序
- 第一行必须是表头：date,name,category,value
- 列顺序可任意，但表头名称必须准确

### 数据类型
- `date`：有效的日期格式（YYYY-MM-DD）
- `name`：非空字符串
- `category`：非空字符串
- `value`：有效的数字（支持整数和浮点数）

### 数据完整性
- 每行数据必须包含4个字段
- 不允许空行或空字段
- 同一date下同一name不应重复

### 数据范围
- 最少数据量：至少2个时间点
- 每个时间点：至少2个条目
- 推荐数据量：10-100个时间点，每个时间点10-50个条目

## 常见问题

### Q1：日期格式可以是其他格式吗？
A：目前仅支持 YYYY-MM-DD 格式。如果数据使用其他格式，请先转换。

### Q2：category字段可以省略吗？
A：不可以。category用于颜色编码，所有条目必须有category。

### Q3：value可以是负数吗？
A：目前仅支持正数。如果需要展示负数，建议先进行数据转换。

### Q4：条目数量有上限吗？
A：理论上无上限，但建议每个时间点不超过50个条目，否则可视化效果较差。

### Q5：时间间隔需要统一吗？
A：不需要严格统一，但建议保持规律（如每年、每月）以获得最佳动画效果。

## 数据准备检查清单

生成可视化前，请确认：
- [ ] CSV文件使用UTF-8编码
- [ ] 第一行为表头：date,name,category,value
- [ ] 每行包含完整的4个字段
- [ ] date字段格式为YYYY-MM-DD
- [ ] value字段为有效数字
- [ ] 至少包含2个时间点
- [ ] 每个时间点至少包含2个条目
- [ ] 同一date下同一name无重复
